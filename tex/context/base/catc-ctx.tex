%D \module
%D   [       file=catc-cys,
%D        version=2006.09.18,
%D          title=\CONTEXT\ Catcode Macros,
%D       subtitle=Extra Tables,
%D         author=Hans Hagen,
%D           date=\currentdate,
%D      copyright={PRAGMA / Hans Hagen \& Ton Otten}]
%C
%C This module is part of the \CONTEXT\ macro||package and is
%C therefore copyrighted by \PRAGMA. See mreadme.pdf for
%C details.

%D We prefer to define relevant catcode tables in this file instead
%D of everywhere around.

\ifdefined \ctxcatcodes  \else \newcatcodetable \ctxcatcodes  \fi
\ifdefined \txtcatcodes  \else \newcatcodetable \txtcatcodes  \fi
\ifdefined \mthcatcodes  \else \newcatcodetable \mthcatcodes  \fi % math, not used, too tricky
\ifdefined \typcatcodesa \else \newcatcodetable \typcatcodesa \fi % { }
\ifdefined \typcatcodesb \else \newcatcodetable \typcatcodesb \fi % < >
\ifdefined \typcatcodesc \else \newcatcodetable \typcatcodesc \fi % delimited

\startcatcodetable \ctxcatcodes
    \catcode\tabasciicode      \spacecatcode
    \catcode\endoflineasciicode\endoflinecatcode
    \catcode\formfeedasciicode \endoflinecatcode
    \catcode\spaceasciicode    \spacecatcode
  % \catcode\newlineasciicode  \spacecatcode
    \catcode\endoffileasciicode\ignorecatcode
    \catcode`\\                \escapecatcode
    \catcode`\{                \begingroupcatcode
    \catcode`\}                \endgroupcatcode
    \catcode`\$                \mathshiftcatcode
    \catcode`\&                \alignmentcatcode
    \catcode`\#                \parametercatcode
    \catcode`\^                \superscriptcatcode
    \catcode`\_                \subscriptcatcode
    \catcode`\%                \commentcatcode
    \catcode`\~                \activecatcode
    \catcode`\|                \activecatcode
\stopcatcodetable

\startcatcodetable \prtcatcodes
    \catcode\tabasciicode      \spacecatcode
    \catcode\endoflineasciicode\endoflinecatcode
    \catcode\formfeedasciicode \endoflinecatcode
    \catcode\spaceasciicode    \spacecatcode
    \catcode\endoffileasciicode\ignorecatcode
    \catcode`\\                \escapecatcode
    \catcode`\{                \begingroupcatcode
    \catcode`\}                \endgroupcatcode
    \catcode`\$                \mathshiftcatcode
    \catcode`\&                \alignmentcatcode
    \catcode`\#                \parametercatcode
    \catcode`\^                \superscriptcatcode % soon we will also get rid of the usage of ^^ so then ^ can also be other
    \catcode`\_                \ifnum\texengine=\luatexengine\lettercatcode \else \subscriptcatcode \fi
    \catcode`\%                \commentcatcode
    \catcode`\@                \lettercatcode
    \catcode`\!                \lettercatcode
    \catcode`\?                \lettercatcode
    \catcode`\~                \activecatcode
    \catcode`\|                \activecatcode
\stopcatcodetable

\startcatcodetable \mthcatcodes
    \catcode\tabasciicode      \spacecatcode
    \catcode\endoflineasciicode\endoflinecatcode
   %\catcode\newlineasciicode  \spacecatcode
    \catcode\formfeedasciicode \endoflinecatcode
    \catcode\spaceasciicode    \spacecatcode
    \catcode\endoffileasciicode\ignorecatcode
    \catcode`\\                \escapecatcode
    \catcode`\{                \begingroupcatcode
    \catcode`\}                \endgroupcatcode
    \catcode`\$                \mathshiftcatcode
    \catcode`\&                \alignmentcatcode
    \catcode`\#                \parametercatcode
    \catcode`\^                \superscriptcatcode
    \catcode`\_                \subscriptcatcode
    \catcode`\%                \commentcatcode
   %\catcode`\~                \activecatcode
   %\catcode`\|                \activecatcode
\stopcatcodetable

\startcatcodetable \typcatcodesa
    \catcode\tabasciicode      \othercatcode
    \catcode\endoflineasciicode\othercatcode
    \catcode\formfeedasciicode \othercatcode
    \catcode\spaceasciicode    \othercatcode
    \catcode\endoffileasciicode\othercatcode
    \catcode`\{                \begingroupcatcode
    \catcode`\}                \endgroupcatcode
\stopcatcodetable

\startcatcodetable \typcatcodesb
    \catcode\tabasciicode      \othercatcode
    \catcode\endoflineasciicode\othercatcode
    \catcode\formfeedasciicode \othercatcode
    \catcode\spaceasciicode    \othercatcode
    \catcode\endoffileasciicode\othercatcode
    \catcode`\<                \begingroupcatcode
    \catcode`\>                \endgroupcatcode
\stopcatcodetable

\startcatcodetable \typcatcodesc
    \catcode\tabasciicode      \othercatcode
    \catcode\endoflineasciicode\othercatcode
    \catcode\formfeedasciicode \othercatcode
    \catcode\spaceasciicode    \othercatcode
    \catcode\endoffileasciicode\othercatcode
\stopcatcodetable

\startcatcodetable \txtcatcodes
    \catcode\tabasciicode      \spacecatcode
    \catcode\endoflineasciicode\endoflinecatcode
    \catcode\formfeedasciicode \endoflinecatcode
    \catcode\spaceasciicode    \spacecatcode
    \catcode\endoffileasciicode\ignorecatcode
    \catcode`\\                \escapecatcode
    \catcode`\{                \begingroupcatcode
    \catcode`\}                \endgroupcatcode
\stopcatcodetable

\letcatcodecommand \ctxcatcodes  `\|   \relax
\letcatcodecommand \ctxcatcodes  `\~   \relax

     \catcodetable        \ctxcatcodes
\let \defaultcatcodetable \ctxcatcodes

% for the moment here:

\def\starttexcode
  {\pushcatcodetable
   \catcodetable\prtcatcodes}

\def\stoptexcode
  {\popcatcodetable}

\endinput

% under consideration:
%
% \newcatcodetable\txtcatcodes
%
% \startcatcodetable \txtcatcodes
%     \catcode\tabasciicode      \spacecatcode
%     \catcode\endoflineasciicode\endoflinecatcode
%     \catcode\formfeedasciicode \endoflinecatcode
%     \catcode\spaceasciicode    \spacecatcode
%     \catcode`\\                \escapecatcode
%     \catcode`\{                \begingroupcatcode
%     \catcode`\}                \endgroupcatcode
% \stopcatcodetable
%
% \newcount\relaxedcatcodedepth
%
% \def\startrelaxedcatcodes
%   {\global\chardef\relaxedcatcodeparent\catcodetable
%    \global\advance\relaxedcatcodedepth\plusone
%    \nonknuthmode\setcatcodetable\txtcatcodes}
%
% \def\stoprelaxedcatcodes
%   {\ifcase\relaxedcatcodedepth
%      % error
%    \or
%      \setcatcodetable\relaxedcatcodeparent
%      \global\relaxedcatcodedepth\zerocount
%    \else
%      \global\advance\relaxedcatcodedepth\minusone
%      \setcatcodetable\txtcatcodes
%    \fi}
%
% \starttext
%
% \startrelaxedcatcodes
%     \startcomment test \stopcomment
%     test $ test 10% whatever|test \mathematics{x^2=1}
% \stoprelaxedcatcodes
%
% $x^2=1$
%
% \stoptext
