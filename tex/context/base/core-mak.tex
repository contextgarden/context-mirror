%D \module
%D   [       file=core-mak,
%D        version=1997.10.05,
%D          title=\CONTEXT\ Core Macros,
%D       subtitle=General Makeup Commands,
%D         author=Hans Hagen,
%D           date=\currentdate,
%D      copyright={PRAGMA / Hans Hagen \& Ton Otten}]
%C
%C This module is part of the \CONTEXT\ macro||package and is
%C therefore copyrighted by \PRAGMA. See mreadme.pdf for 
%C details. 

\writestatus{loading}{Context Core Macros / General Makeup Commands}

\unprotect

% \definieerplaats[naam][instellingen]
% \plaats<naam>[[instellingen]]
% 
% - still undocumented and also not in setupb yet
% - kan ook intern/direct (scheelt duplicatie), zie \framedtext

\def\dodefinieerplaats[#1][#2]%
  {\getparameters 
     [\??pl#1]
     [\c!links=\hss,
      \c!rechts=\hss,
      \c!regelcorrectie=\v!uit,
      \c!dieptecorrectie=\v!uit,
      \c!marge=\v!standaard,
      %\c!voor=,
      %\c!na=, 
     #2]%
   \setvalue{\e!plaats#1}{\doplaats[\??pl#1]}}

\def\definieerplaats%
  {\dodoubleempty\dodefinieerplaats}

\def\doplaats%
  {\dodoubleempty\dodoplaats}

\def\dodoplaats[#1][#2]% correctie moet mooier 
  {\bgroup 
   \dowithnextbox
     {\setlocalhsize
      \getparameters[#1][#2]%
      \getvalue{#1\c!voor}%
      \doifvalue{#1\c!regelcorrectie}  {\v!aan} {\startbaselinecorrection}%
      \doifinset{\getvalue{#1\c!marge}}{\v!standaard,\v!ja}{\noindent}% 
      \hbox to \localhsize
        {\getvalue{#1\c!links}%
         \box\nextbox
         \getvalue{#1\c!rechts}}%
      \doifvalue{#1\c!dieptecorrectie} {\v!aan} {\baselinecorrection}%
      \doifvalue{#1\c!regelcorrectie}  {\v!aan} {\stopbaselinecorrection}%
      \getvalue{#1\c!na}%
      \egroup}
   \vbox}

\protect

\endinput
