<?xml version="1.0" encoding="UTF-8"?>

<cd:interface file="lxml-ini.mkiv">

    <!-- some common definitions -->

    <cd:define name="xml-node">
        <cd:argument><cd:constant type="cd:node"/></cd:argument>
    </cd:define>

    <cd:define name="xml-path">
        <cd:argument><cd:constant type="cd:path"/></cd:argument>
    </cd:define>

    <cd:define name="xml-node-path">
        <cd:argument><cd:constant type="cd:node"/></cd:argument>
        <cd:argument><cd:constant type="cd:lpath"/></cd:argument>
    </cd:define>

    <cd:define name="xml-true">
        <cd:argument><cd:constant type="cd:true"/></cd:argument>
    </cd:define>

    <cd:define name="xml-true-false">
        <cd:argument><cd:constant type="cd:true"/></cd:argument>
        <cd:argument><cd:constant type="cd:false"/></cd:argument>
    </cd:define>

    <!-- the definitions themselves -->

    <!-- cd:sequence><cd:string value="xmlmain"/></cd:sequence -->

    <cd:command name="xmlmain">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlflush">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmltext">
        <cd:arguments><cd:resolve name="xml-node-path"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlnonspace">
        <cd:arguments><cd:resolve name="xml-node-path"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlflushspacewise">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlflushlinewise">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlall">
        <cd:arguments><cd:resolve name="xml-node-path"/></cd:arguments>
    </cd:command>

    <cd:command name="xmllastmatch" />

    <cd:command name="xmlfirst">
        <cd:arguments><cd:resolve name="xml-node-path"/></cd:arguments>
    </cd:command>

    <cd:command name="xmllast">
        <cd:arguments><cd:resolve name="xml-node-path"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlcontext">
        <cd:arguments><cd:resolve name="xml-node-path"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlflushcontext">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlshow">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlinfo">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlfilter">
        <cd:arguments><cd:resolve name="xml-node-path"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlstrip">
        <cd:arguments><cd:resolve name="xml-node-path"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlstripped">
        <cd:arguments><cd:resolve name="xml-node-path"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlstripnolines">
        <cd:arguments><cd:resolve name="xml-node-path"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlstrippednolines">
        <cd:arguments><cd:resolve name="xml-node-path"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlposition">
        <cd:arguments>
            <cd:resolve name="xml-node-path"/>
            <cd:argument><cd:constant type="cd:number"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlelement">
        <cd:arguments>
            <cd:resolve name="xml-node"/>
            <cd:argument><cd:constant type="cd:number"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlpos">
        <cd:arguments>
            <cd:resolve name="xml-node"/>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlsnippet">
        <cd:arguments>
            <cd:resolve name="xml-node"/>
            <cd:argument><cd:constant type="cd:number"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlconcat">
        <cd:arguments>
            <cd:resolve name="xml-node-path"/>
            <cd:argument><cd:constant type="cd:text"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlconcatrange">
        <cd:arguments>
            <cd:resolve name="xml-node-path"/>
            <cd:argument><cd:constant type="cd:text"/></cd:argument>
            <cd:argument><cd:constant type="cd:first"/></cd:argument>
            <cd:argument><cd:constant type="cd:last"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlcommand">
        <cd:arguments>
            <cd:resolve name="xml-node-path"/>
            <cd:argument><cd:constant type="cd:xmlsetup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlinlineverbatim">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlinlineverbatim" type="environment">
        <cd:arguments>
            <cd:keywords>
                <cd:constant type="cd:name"/>
            </cd:keywords>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmldisplayverbatim">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmldisplayverbatim" type="environment">
        <cd:arguments>
            <cd:keywords>
                <cd:constant type="cd:name"/>
            </cd:keywords>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlverbatim">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlprettyprint">
        <cd:arguments>
            <cd:resolve name="xml-node"/>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlloadfile">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:file"/></cd:argument>
            <cd:argument><cd:constant type="cd:xmlsetup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlloadbuffer">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:buffer"/></cd:argument>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:xmlsetup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlloaddata">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:text"/></cd:argument>
            <cd:argument><cd:constant type="cd:xmlsetup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlloadonly">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:file"/></cd:argument>
            <cd:argument><cd:constant type="cd:xmlsetup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlprocessfile">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:file"/></cd:argument>
            <cd:argument><cd:constant type="cd:xmlsetup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlprocessbuffer">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:buffer"/></cd:argument>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:xmlsetup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlprocessdata">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:text"/></cd:argument>
            <cd:argument><cd:constant type="cd:xmlsetup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlinclude">
        <cd:arguments>
            <cd:resolve name="xml-node-path"/>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlname">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlnamespace">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmltag">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlcount">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlatt">
        <cd:arguments>
            <cd:resolve name="xml-node"/>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlattdef">
        <cd:arguments>
            <cd:resolve name="xml-node"/>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:text"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlrefatt">
        <cd:arguments>
            <cd:resolve name="xml-node"/>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmllastatt" />

    <cd:command name="xmlattribute">
        <cd:arguments>
            <cd:resolve name="xml-node-path"/>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlattributedef">
        <cd:arguments>
            <cd:resolve name="xml-node-path"/>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:text"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlchainatt">
        <cd:arguments>
            <cd:resolve name="xml-node"/>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlchainattdef">
        <cd:arguments>
            <cd:resolve name="xml-node"/>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:text"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmldirectives">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmldirectivesbefore">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmldirectivesafter">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlinstalldirective">
        <cd:arguments><cd:resolve name="name"/></cd:arguments>
        <cd:arguments><cd:resolve name="name"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlsetup">
        <cd:arguments>
            <cd:resolve name="xml-node"/>
            <cd:argument><cd:constant type="cd:setup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlsetsetup">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:lpath"/></cd:argument>
            <cd:argument><cd:constant type="cd:setup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlremovesetup">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:setup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlremovedocumentsetup">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:setup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlflushdocumentsetups">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:setup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlresetsetups">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlresetdocumentsetups">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlprependsetup">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:setup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlappendsetup">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:setup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlbeforesetup">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:setup"/></cd:argument>
            <cd:argument><cd:constant type="cd:setup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlaftersetup">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:setup"/></cd:argument>
            <cd:argument><cd:constant type="cd:setup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlprependdocumentsetup">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:setup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlappenddocumentsetup">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:setup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlbeforedocumentsetup">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:setup"/></cd:argument>
            <cd:argument><cd:constant type="cd:setup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlafterdocumentsetup">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:setup"/></cd:argument>
            <cd:argument><cd:constant type="cd:setup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlregisteredsetups">
    </cd:command>

    <cd:command name="xmlregistereddocumentsetups">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:setup"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlsetfunction">
        <cd:arguments>
            <cd:resolve name="xml-node-path"/>
            <cd:argument><cd:constant type="cd:luafunction"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmldoif">
        <cd:arguments>
            <cd:resolve name="xml-node-path"/>
            <cd:resolve name="xml-true"/>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmldoifnot">
        <cd:arguments>
            <cd:resolve name="xml-node-path"/>
            <cd:resolve name="xml-true"/>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmldoifelse">
        <cd:arguments>
            <cd:resolve name="xml-node-path"/>
            <cd:resolve name="xml-true-false"/>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmldoiftext">
        <cd:arguments>
            <cd:resolve name="xml-node-path"/>
            <cd:resolve name="xml-true"/>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmldoifnottext">
        <cd:arguments>
            <cd:resolve name="xml-node-path"/>
            <cd:resolve name="xml-true"/>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmldoifelsetext">
        <cd:arguments>
            <cd:resolve name="xml-node-path"/>
            <cd:resolve name="xml-true-false"/>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmldoifselfempty">
        <cd:arguments>
            <cd:resolve name="xml-node"/>
            <cd:resolve name="xml-true"/>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmldoifnotselfempty">
        <cd:arguments>
            <cd:resolve name="xml-node"/>
            <cd:resolve name="xml-true"/>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmldoifelseselfempty">
        <cd:arguments>
            <cd:resolve name="xml-node"/>
            <cd:resolve name="xml-true-false"/>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmldoifelseempty">
        <cd:arguments>
            <cd:resolve name="xml-node-path"/>
            <cd:resolve name="xml-true-false"/>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlregisterns">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:url"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlregisterns">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlremapname">
        <cd:arguments>
            <cd:resolve name="xml-node-path"/>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlremapnamespace">
        <cd:arguments>
            <cd:resolve name="xml-node"/>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlchecknamespace">
        <cd:arguments>
            <cd:resolve name="xml-node"/>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlmapvalue">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:category"/></cd:argument>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:text"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlvalue">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:category"/></cd:argument>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:text"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmldoifelsevalue">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:category"/></cd:argument>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:resolve name="xml-true-false"/>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlloaddirectives">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:file"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlsave">
        <cd:arguments>
            <cd:resolve name="xml-node"/>
            <cd:argument><cd:constant type="cd:file"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmltofile">
        <cd:arguments>
            <cd:resolve name="xml-node-path"/>
            <cd:argument><cd:constant type="cd:file"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmltobuffer">
        <cd:arguments>
            <cd:resolve name="xml-node-path"/>
            <cd:argument><cd:constant type="cd:buffer"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmltobufferverbose">
        <cd:arguments>
            <cd:resolve name="xml-node-path"/>
            <cd:argument><cd:constant type="cd:buffer"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <!-- not public cq. might disappear

        <cd:command name="xmltoparameters">
            <cd:arguments>
                <cd:resolve name="xml-node-path"/>
                <cd:argument><cd:constant type="cd:buffer"/></cd:argument>
            </cd:arguments>
        </cd:command>

    -->

    <cd:command name="xmladdindex">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlinclusion">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlinclusions">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlbadinclusions">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlraw">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

    <cd:command name="xmlraw" type="environment" />

    <!-- injectors -->

    <cd:command name="xmlresetinjectors"/>

    <cd:command name="xmlsetinjectors">
        <cd:arguments>
            <cd:keywords list="yes"><cd:constant type="cd:name"/></cd:keywords>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlinjector">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmlapplyselectors">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:node"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <!-- entities -->

    <cd:command name="xmlsetentity">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:text"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmltexentity">
        <cd:arguments>
            <cd:argument><cd:constant type="cd:name"/></cd:argument>
            <cd:argument><cd:constant type="cd:text"/></cd:argument>
        </cd:arguments>
    </cd:command>

    <!-- general setup -->

    <cd:command name="setupxml">
        <cd:arguments>
            <cd:assignments list="yes">
                <cd:parameter name="default">
                    <cd:constant type="hidden"/>
                    <cd:constant type="none"/>
                    <cd:constant type="text"/>
                </cd:parameter>
                <cd:parameter name="compress">
                    <cd:constant type="yes"/>
                    <cd:constant type="no"/>
                </cd:parameter>
            </cd:assignments>
        </cd:arguments>
    </cd:command>

    <cd:command name="xmldefaulttotext">
        <cd:arguments><cd:resolve name="xml-node"/></cd:arguments>
    </cd:command>

</cd:interface>
