%D \module
%D   [      file=s-cdr-01,
%D        version=2001.2.07, % maybe earlier
%D          title=\CONTEXT\ Style File,
%D       subtitle=CDROM Cover,
%D         author=Hans Hagen,
%D           date=\currentdate,
%D      copyright={PRAGMA ADE \& \CONTEXT\ Development Team}]
%C
%C This module is part of the \CONTEXT\ macro||package and is
%C therefore copyrighted by \PRAGMA. See mreadme.pdf for
%C details.

\startmodule[cdr-01]

\setupmodule[cdr-01][option=]

\def\PDFMPformoffset{20cm}

\definepapersize
  [CDcover]
  [width=12.5cm,
   height=12.4cm]

\definelayout
  [CDcover]
  [topspace=5mm,
   backspace=5mm,
   header=0pt,
   footer=0pt,
   width=middle,
   height=middle]

\setuparranging
  [2SIDE]

\setuppapersize
  [CDcover]
  [A4,landscape]

\setuplayout
  [CDcover]

\setuplayout
  [location=middle]

\setupcolors
  [state=start]

\setupbackgrounds
  [leftpage]
  [background=leftcover]

\setupbackgrounds
  [rightpage]
  [background=rightcover]

\setuppagenumbering
  [alternative=doublesided]

\defineoverlay[leftcover] [\useMPgraphic{leftcover}]
\defineoverlay[rightcover][\useMPgraphic{rightcover}]

\definecolor  [cd-color]    [s=0]
\definemeasure[cd-linewidth][.4pt]

\doif {\moduleparameter{cdr-01}{option}} {light} {
    \definecolor  [cd-color]    [s=.85]
    \definemeasure[cd-linewidth][.2pt]
}

\startuseMPgraphic{leftcover}
  StartPage ;
    pickup pencircle scaled \measure{cd-linewidth} ;
    draw
      bottomboundary Page &
      rightboundary  Page &
      topboundary    Page withcolor \MPcolor{cd-color} ;
    draw
      bottomboundary (Page enlarged 3mm) &
      rightboundary  (Page enlarged 3mm) &
      topboundary    (Page enlarged 3mm) dashed evenly withcolor \MPcolor{cd-color} ;
  StopPage ;
\stopuseMPgraphic

\startuseMPgraphic{rightcover}
  StartPage ;
    pickup pencircle scaled \measure{cd-linewidth} ;
    draw
      topboundary    Page &
      leftboundary   Page &
      bottomboundary Page withcolor \MPcolor{cd-color} ;
    draw
      topboundary    (Page enlarged 3mm) &
      leftboundary   (Page enlarged 3mm) &
      bottomboundary (Page enlarged 3mm) dashed evenly withcolor \MPcolor{cd-color} ;
    draw
      bottomboundary Page --
      lrcorner Page shifted (-5mm,-1cm) --
      llcorner Page shifted ( 5mm,-1cm) -- cycle withcolor \MPcolor{cd-color} ;
    draw
      topboundary Page --
      ulcorner Page shifted ( 5mm, 1cm) --
      urcorner Page shifted (-5mm, 1cm) -- cycle withcolor \MPcolor{cd-color} ;
  StopPage ;
  setbounds currentpicture to Page ;
\stopuseMPgraphic

\setupmakeup
  [standard]
  [doublesided=no,page=]

\setuplayout
  [topspace=5mm,
   backspace=5mm,
   header=0pt,
   footer=0pt,
   width=middle,
   height=middle]

\defineframedtext
  [maintext]
  [background={foreground,color},
   backgroundcolor=a-bit-white,
   frame=off,
   before=,
   after=,
   align=right,
   strut=no,
   height=fit,
   width=\textheight]

\stopmodule

\doifnotmode{demo}{\endinput}

\starttext
    \startstandardmakeup
        page 1
    \stopstandardmakeup

    \startstandardmakeup
        page 2
    \stopstandardmakeup
\stoptext
