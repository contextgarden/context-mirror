%D \module
%D   [      file=s-article-titlepage,
%D        version=2018.05.20,
%D          title=\CONTEXT\ Style File,
%D       subtitle=Article Title Page,
%D         author=Hans Hagen,
%D           date=\currentdate,
%D      copyright={PRAGMA ADE \& \CONTEXT\ Development Team}]
%C
%C This module is part of the \CONTEXT\ macro||package and is
%C therefore copyrighted by \PRAGMA. See mreadme.pdf for
%C details.

\startmodule[article-titlepage]

\unprotect

% \startalignment[middle]
%     \let\\=\par
%     \bfb
%     \setupinterlinespace
%     \documentvariable {subject}
%     \par
% \stopalignment

\defineframed
  [titlepageframed]
  [\c!frame=\v!off,
   \c!align=\v!middle]

\startsetups document:titlepage
    \startstandardmakeup[\c!align=\v!middle]
        \doifdocumentvariable {title} {
            \dontleavehmode \titlepageframed
                [\c!foregroundstyle=\bfd\setupinterlinespace]
                {\documentvariable {title}}
        }
        \doifdocumentvariable {subject} {
            \blank[2*\v!big]
            \dontleavehmode \titlepageframed
                [\c!foregroundstyle=\bfb\setupinterlinespace]
                {\documentvariable {subject}}
        }
        \doifdocumentvariable {author} {
            \blank[4*\v!big]
            \dontleavehmode \titlepageframed
                [\c!foregroundstyle=\bfa\setupinterlinespace]
                {\documentvariable {author}}
        }
        \vfill
        \doifdocumentvariable {affiliation} {
            \dontleavehmode \titlepageframed
                [\c!foregroundstyle=\bfa\setupinterlinespace]
                {\documentvariable {affiliation}}
        }
        \doifdocumentvariable {date} {
            \blank[\v!big]
            \dontleavehmode \titlepageframed
                [\c!foregroundstyle=\bfa\setupinterlinespace]
                {\documentvariable {date}}
        }
    \stopstandardmakeup
\stopsetups

\stopmodule
