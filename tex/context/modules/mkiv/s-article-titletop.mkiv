%D \module
%D   [      file=s-article-titletop,
%D        version=2018.05.20,
%D          title=\CONTEXT\ Style File,
%D       subtitle=Article Top Title,
%D         author=Hans Hagen,
%D           date=\currentdate,
%D      copyright={PRAGMA ADE \& \CONTEXT\ Development Team}]
%C
%C This module is part of the \CONTEXT\ macro||package and is
%C therefore copyrighted by \PRAGMA. See mreadme.pdf for
%C details.

\startmodule[article-titletop]

\unprotect

\defineframed
  [titlepageframed]
  [\c!frame=\v!off,
   \c!align=\v!middle]

\startsetups document:titlepage
    \setupheader[\c!state=\v!high]
    \start
        \forgetall
        \startalignment[\v!middle]
            \doifdocumentvariable {title} {
                \dontleavehmode \titlepageframed
                    [\c!foregroundstyle=\bfd\setupinterlinespace]
                    {\documentvariable {title}}
                \par
            }
            \doifdocumentvariable {subject} {
                \dontleavehmode \titlepageframed
                    [\c!foregroundstyle=\bfb\setupinterlinespace]
                    {\documentvariable {subject}}
                \par
            }
            \doifdocumentvariable {author} {
                \dontleavehmode \titlepageframed
                    [\c!foregroundstyle=\bfa\setupinterlinespace]
                    {\documentvariable {author}}
            \par
            }
            \doifdocumentvariable {affiliation} {
                \dontleavehmode \titlepageframed
                    [\c!foregroundstyle=\bfa\setupinterlinespace]
                    {\documentvariable {affiliation}}
            \par
            }
            \doifdocumentvariable {date} {
                \dontleavehmode \titlepageframed
                    [\c!foregroundstyle=\bfa\setupinterlinespace]
                    {\documentvariable {date}}
            \par
            }
            \blank[3*\v!big]
        \stopalignment
    \stop
\stopsetups

\setupdocument
  [\c!before=\directsetup{document:titlepage}]

\protect

\stopmodule
