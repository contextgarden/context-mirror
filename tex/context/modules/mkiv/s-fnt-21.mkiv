%D \module
%D   [      file=s-fnt-20,
%D        version=2009.01.10,
%D          title=\CONTEXT\ Style File,
%D       subtitle=Tracing Feature Application (2),
%D         author=Hans Hagen,
%D           date=\currentdate,
%D      copyright={PRAGMA ADE \& \CONTEXT\ Development Team}]
%C
%C This module is part of the \CONTEXT\ macro||package and is
%C therefore copyrighted by \PRAGMA. See mreadme.pdf for
%C details.

%D This module is related to:

\usemodule[fnt-20]

\setvariables
  [otftracker]
  [set=\setups{araball}]

\startsetups araball
    \begingroup
    \setupcolors[state=start]%
    \enabletrackers[otf.analyzing]% beware, kind of global
    \ruledhbox \bgroup
      \definedfont[\getvariable{otftracker}{font}*\getvariable{otftracker}{features} at \getvariable{otftracker}{size}]%
      \ifnum\getvariable{otftracker}{direction}<0 \textdir TRT\else\ifnum\getvariable{otftracker}{direction}>0 \textdir TLT\fi\fi\relax
      \getvariable{otftracker}{sample}%
    \egroup
    \disabletrackers[otf.analyzing]%
    \endgroup
\stopsetups

\unexpanded\def\ShowOtfTrackerSample#1%
  {\doiffile{#1}
     {\blank
      \startlinecorrection
      \vbox \bgroup
        \forgetall
        \setbox\scratchbox\hbox{\component #1 \relax}
        \hbox{\copy\scratchbox\quad\lower\dp\scratchbox\hbox{\ruledhbox{\externalfigure[#1-volt.pdf][height=\htdp\scratchbox]}}}
        \hbox{\strut\tttf#1}%
      \egroup
      \stoplinecorrection
      \blank}}

\endinput

% \usemodule[fnt-21]
%
% \starttext
%
% \setvariables
%   [otftracker]
%   [direction=-1,
%    sample=ูุง,
%    title=Test,
%    font=file:arabtype,
%  % font=file:husayni,
%  % font=file:scheherazaderegot,
%    features=arabic]
%
% \stoptext
